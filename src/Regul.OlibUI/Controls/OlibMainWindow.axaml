<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:local="using:Regul.OlibUI">
	<Design.PreviewWith>
		<local:OlibMainWindow Width="500" Height="300"/>
	</Design.PreviewWith>

	<Styles.Resources>
		<local:WindowIconToImageConverter x:Key="WindowIconToImageConverter"/>
	</Styles.Resources>

	<Style Selector="local|OlibMainWindow">
		<Setter Property="BorderBrush" Value="{DynamicResource ThemeGlobalBorderBrush}"/>
		<Setter Property="Foreground" Value="{DynamicResource ThemeForegroundBrush}"/>
		<Setter Property="FontSize" Value="{DynamicResource FontSizeNormal}"/>
		<Setter Property="TransparencyLevelHint" Value="Transparent"/>
		<Setter Property="Template">
			<ControlTemplate>
				<Grid>
					<Border Classes="OuterBorder" CornerRadius="5">
						<Grid RowDefinitions="31,*">
							<Border Background="Black" ZIndex="5" Grid.Row="1" Opacity="0.2" IsVisible="{TemplateBinding InLoadMode}" CornerRadius="0 0 4.5 4.5"/>

							<Border Grid.Row="0" Background="{DynamicResource ThemeBackgroundBrush}" BorderBrush="{DynamicResource ThemeGlobalBorderBrush}" BorderThickness="0 0 0 1" CornerRadius="4.5 4.5 0 0">
								<Grid
								  ColumnDefinitions="Auto,*,Auto">
									<Border Name="TitleBar" ZIndex="-5" Grid.ColumnSpan="2" Background="Transparent" CornerRadius="5 5 0 0">
										<Border.ContextMenu>
											<ContextMenu Name="GlobalContextMenu">
												<MenuItem Header="{DynamicResource Reestablish}" Name="ReestablishMenuItem">
													<MenuItem.Icon>
														<Grid Width="10" Height="10">
															<Border BorderThickness="2" BorderBrush="{DynamicResource ThemeForegroundBrush}" Width="7" Height="7" HorizontalAlignment="Left" VerticalAlignment="Bottom"/>
															<Grid Width="7" Height="7" HorizontalAlignment="Right" VerticalAlignment="Top">
																<Border BorderThickness="0 2 2 0" BorderBrush="{DynamicResource ThemeForegroundBrush}"/>
															</Grid>
														</Grid>
													</MenuItem.Icon>
												</MenuItem>
												<MenuItem Header="{DynamicResource Collapse}" Name="CollapseMenuItem">
													<MenuItem.Icon>
														<Rectangle Width="10" Height="2" StrokeThickness="2" Stroke="{DynamicResource ThemeForegroundBrush}"/>
													</MenuItem.Icon>
												</MenuItem>
												<MenuItem Header="{DynamicResource Expand}" Name="ExpandMenuItem">
													<MenuItem.Icon>
														<Rectangle Width="10" Height="10" StrokeThickness="2" Stroke="{DynamicResource ThemeForegroundBrush}"/>
													</MenuItem.Icon>
												</MenuItem>
												<Separator/>
												
												<MenuItem Header="{DynamicResource Close}" Name="CloseMenuItem" InputGesture="Ctrl+Q">
													<MenuItem.Icon>
														<Path Margin="4" Stretch="Fill" StrokeThickness="2" Stroke="{DynamicResource ThemeForegroundBrush}" Data="M 0 0 L 5 5 M 5 0 L 0 5"/>
													</MenuItem.Icon>
												</MenuItem>
											</ContextMenu>
										</Border.ContextMenu>
									</Border>
									<StackPanel Orientation="Horizontal" Margin="5,0,0,0">
										<Image Classes="IconImage" Source="{Binding Icon, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource WindowIconToImageConverter}}" MaxWidth="16" MaxHeight="16"/>
										<Path Name="Icon" VerticalAlignment="Center" Fill="{DynamicResource ThemeForegroundBrush}" Data="F1 M45,10.2z M0,0z M45,9A0.9,0.9,0,0,1,44.7,9.7A1.2,1.2,0,0,1,43.8,10L39.2,10A1.8,1.8,0,0,1,38.1,9.7A1.8,1.8,0,0,1,37.8,8.6L37.8,1.5A1.6,1.6,0,0,1,38.1,0.4A1.1,1.1,0,0,1,39,0A1,1,0,0,1,39.9,0.4A1.2,1.2,0,0,1,40.3,1.5L40.3,7.9 43.8,7.9A1.2,1.2,0,0,1,44.7,8.2A1.1,1.1,0,0,1,45,9z M36.5,1.5L36.5,5.9A5.4,5.4,0,0,1,36.2,7.8A2.9,2.9,0,0,1,35.4,9.2A4.6,4.6,0,0,1,34.1,10L32.4,10.2 30.5,10 29.1,9.2A2.9,2.9,0,0,1,28.3,7.8A6.3,6.3,0,0,1,28,5.9L28,1.5A1.6,1.6,0,0,1,28.4,0.4A1.1,1.1,0,0,1,29.3,-1.11022302462516E-16A1,1,0,0,1,30.2,0.4A1.4,1.4,0,0,1,30.6,1.5L30.6,6A4.1,4.1,0,0,0,30.7,7.2A1,1,0,0,0,31.2,7.8A1.6,1.6,0,0,0,32.3,8.1A1.7,1.7,0,0,0,33.6,7.6A3,3,0,0,0,33.9,6L33.9,1.5A1.6,1.6,0,0,1,34.3,0.4A1,1,0,0,1,35.2,-1.11022302462516E-16A1.1,1.1,0,0,1,36.1,0.4L36.4,0.8 36.5,1.5z M17,9A1.1,1.1,0,0,1,16.7,9.8L15.8,10 10.7,10A1.8,1.8,0,0,1,9.6,9.7A1.8,1.8,0,0,1,9.3,8.6L9.3,1.6A2.5,2.5,0,0,1,9.4,0.8A1,1,0,0,1,10,0.3L15.7,0.3 16.6,0.5A1.1,1.1,0,0,1,16.9,1.3A1.1,1.1,0,0,1,16.6,2.1L15.7,2.3 11.8,2.3 11.8,3.9 15.3,3.9 16.2,4.1A1.1,1.1,0,0,1,16.5,4.9A0.9,0.9,0,0,1,16.2,5.6A1.2,1.2,0,0,1,15.3,5.9L11.8,5.9 11.8,7.9 15.8,7.9A1.2,1.2,0,0,1,16.7,8.2A1.1,1.1,0,0,1,17,9z M8.1,8.4L7.5,7.3 6.7,6.1 6.2,5.7A5.7,5.7,0,0,0,7.5,4.9A2.9,2.9,0,0,0,8.2,3A5.2,5.2,0,0,0,8,1.9L7.4,1A2.6,2.6,0,0,0,6.5,0.5A1.6,1.6,0,0,0,5.6,0.2L1.5,0.2A1.6,1.6,0,0,0,0.4,0.5A1.4,1.4,0,0,0,0,1.6L0,8.7A1.8,1.8,0,0,0,0.3,9.8A1.3,1.3,0,0,0,1.3,10.2A1.2,1.2,0,0,0,2.2,9.8A1.6,1.6,0,0,0,2.5,8.7L2.5,6.1 3.6,6.1 4.1,6.5 4.8,7.5 5.5,8.8 5.9,9.4 6.4,9.9 7.1,10.1 7.7,10.1 8.2,9.7A1.3,1.3,0,0,0,8.3,9.1A1.4,1.4,0,0,0,8.1,8.4z M5.6,3.1L5.5,3.7 4.9,4 2.5,4 2.5,2.2 5.1,2.2 5.5,2.5A1.1,1.1,0,0,1,5.6,3.1z M21.3,9.8L18.9,9.8A0.5,0.5,0,0,1,18.4,9.5L18,8.9A12.2,12.2,0,0,1,17.3,7.2A11,11,0,0,1,17.1,5.4A4.5,4.5,0,0,1,17.5,3.4A3.7,3.7,0,0,1,18.5,1.7A4.4,4.4,0,0,1,20.1,0.7L22.2,0.4A7.6,7.6,0,0,1,24.3,0.7A4.4,4.4,0,0,1,25.9,1.7A4.2,4.2,0,0,1,26.9,3.4A4.9,4.9,0,0,1,27.3,5.5A5.7,5.7,0,0,1,27,7.3A2.9,2.9,0,0,1,26.3,8.5A2.4,2.4,0,0,1,25.4,9.3L24.5,9.5A1.1,1.1,0,0,1,23.7,9.2A1.4,1.4,0,0,1,23.4,8.3A0.9,0.9,0,0,1,23.5,7.8L23.9,7.4 24.7,6.8A0.9,0.9,0,0,0,25,6.3A1.5,1.5,0,0,0,25.2,5.4A4.3,4.3,0,0,0,25,4.3A1.3,1.3,0,0,0,24.4,3.6A1.9,1.9,0,0,0,23.5,3.1L22.2,2.9A3.1,3.1,0,0,0,20,3.6A1.9,1.9,0,0,0,19.2,5.4A2,2,0,0,0,19.4,6.5A2.9,2.9,0,0,0,19.7,7.5L20.7,7.5 20.7,6.3A2,2,0,0,1,20.9,5.4A0.9,0.9,0,0,1,21.7,5A1.1,1.1,0,0,1,22.5,5.3A1.1,1.1,0,0,1,22.8,6.1L22.8,8.2 22.7,9C22.7,9.3,22.5,9.5,22.2,9.6L21.3,9.8z"/>
									</StackPanel>
									<ContentControl Margin="5 0 0 0" Grid.Column="1" Content="{TemplateBinding TitleBarMenu}"/>
									<StackPanel
										Grid.Column="2"
										Orientation="Horizontal">
										<StackPanel.Styles>
											<Style Selector="Button">
												<Setter Property="Width" Value="45" />
												<Setter Property="Height" Value="30" />
											</Style>
											<Style Selector="Button > Path">
												<Setter Property="Stroke" Value="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Button}}"/>
												<Setter Property="StrokeThickness" Value="2"/>
											</Style>
											<Style Selector="Button:not(:pointerover):not(:pressed):disabled">
												<Setter Property="Opacity" Value="{DynamicResource ThemeDisabledOpacity}" />
											</Style>
											<Style Selector="Button#MinimizeButton > Rectangle">
												<Setter Property="Fill" Value="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Button}}"/>
											</Style>
											<Style Selector="Button#MaximizeButton Rectangle">
												<Setter Property="Stroke" Value="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Button}}"/>
												<Setter Property="StrokeThickness" Value="2"/>
											</Style>
											<Style Selector="Button#MaximizeButton > Grid > Grid Border">
												<Setter Property="BorderBrush" Value="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Button}}"/>
											</Style>
											<Style Selector="local|OlibMainWindow[WindowState=Maximized] /template/ Button#MaximizeButton > Grid > Rectangle">
												<Setter Property="IsVisible" Value="False"/>
											</Style>
											<Style Selector="local|OlibMainWindow[WindowState=Normal] /template/ Button#MaximizeButton > Grid > Grid">
												<Setter Property="IsVisible" Value="False"/>
											</Style>
											<Style Selector="local|OlibMainWindow[WindowState=Minimized] /template/ Button#MaximizeButton > Grid > Grid">
												<Setter Property="IsVisible" Value="False"/>
											</Style>
											<Style Selector="Button#MaximizeButton > Grid > Grid > Rectangle">
												<Setter Property="Stroke" Value="Transparent"/>
												<Setter Property="StrokeThickness" Value="0"/>
												<Setter Property="Fill" Value="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Button}}"/>
											</Style>
											<Style Selector="local|OlibMainWindow[IsActive=false] /template/ Button:not(:pointerover):not(:pressed)">
												<Setter Property="Opacity" Value="0.5"/>
											</Style>
										</StackPanel.Styles>
										<Button Name="MinimizeButton" Classes="NoBorder">
											<Rectangle Width="10" Height="2"/>
										</Button>
										<Button Name="MaximizeButton" Classes="NoBorder">
											<Grid>
												<Rectangle Width="10" Height="10"/>
												<Grid Width="10" Height="10">
													<Border BorderThickness="2" Width="7" Height="7" HorizontalAlignment="Left" VerticalAlignment="Bottom"/>
													<Grid Width="7" Height="7" HorizontalAlignment="Right" VerticalAlignment="Top">
														<Border BorderThickness="0 2 2 0"/>
													</Grid>
												</Grid>
											</Grid>
										</Button>
										<Button Name="CloseButton" Classes="NoBorder">
											<Path Data="M 0 0 L 10 10 M 10 0 L 0 10"/>
										</Button>
									</StackPanel>
								</Grid>
							</Border>
							<ContentPresenter Grid.Row="1" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" Background="{TemplateBinding Background}" CornerRadius="0 0 4.5 4.5"/>
						</Grid>
					</Border>
					<Grid Name="ResizeGrid" ColumnDefinitions="8,*,8" RowDefinitions="8,*,8">
						<Border Name="TopLeft" ZIndex="1"/>
						<Border
							Name="TopRight"
							ZIndex="1"
							Grid.Column="2"/>
						<Border
							Name="BottomLeft"
							Grid.Row="2"/>
						<Border
							Name="BottomRight"
							Grid.Row="2"
							Grid.Column="2"/>
						<Border
							Name="Top"
							Grid.Column="1"/>
						<Border
							Name="Right_top"
							Grid.Row="0"
							Grid.Column="2"/>
						<Border
							Name="Right_mid"
							Grid.Row="0"
							Grid.Column="2"/>
						<Border
							Name="Right_bottom"
							Grid.Row="1"
							Grid.Column="2"/>
						<Border
							Name="Bottom"
							Grid.Row="2"
							Grid.Column="1"/>
						<Border
							Name="Left_top"
							Grid.Row="0"/>
						<Border
							Name="Left_mid"
							Grid.Row="0"/>
						<Border
							Name="Left_bottom"
							Grid.Row="1"/>
					</Grid>
				</Grid>
			</ControlTemplate>
		</Setter>
	</Style>
	<Style Selector="local|OlibMainWindow /template/ Image.IconImage:not(Image[Width=0])">
		<Setter Property="Margin" Value="0,0,5,0"/>
	</Style>
	<Style Selector="local|OlibMainWindow[HasSystemDecorations=False] /template/ Border.OuterBorder">
		<Setter Property="BorderBrush" Value="{DynamicResource ThemeGlobalBorderBrush}"/>
		<Setter Property="BorderThickness" Value="1"/>
	</Style>
	<Style Selector="local|OlibMainWindow[WindowState=Maximized] /template/ Border.OuterBorder">
		<Setter Property="BorderThickness" Value="0"/>
	</Style>
	<Style Selector="local|OlibMainWindow[HasSystemDecorations=True] /template/ Grid#TitleBar">
		<Setter Property="IsVisible" Value="False"/>
	</Style>
	<Style Selector="local|OlibMainWindow /template/ Grid#ResizeGrid Border">
		<Setter Property="Background" Value="#01000000"/>
	</Style>
	<Style Selector="local|OlibMainWindow[WindowState=Maximized] /template/ Grid#ResizeGrid">
		<Setter Property="IsVisible" Value="False"/>
	</Style>
	<Style Selector="local|OlibMainWindow[HasSystemDecorations=True] /template/ Grid#ResizeGrid">
		<Setter Property="IsVisible" Value="False"/>
	</Style>
	<Style Selector="local|OlibMainWindow[IsActive=false] /template/ Path#Icon">
		<Setter Property="Opacity" Value="0.5"/>
	</Style>
</Styles>